<div class="home">

        <div class="row">
          <div class="col-lg-6 col-md-12">
            <section class="panel panel-transparent">
              <header class="panel-heading">
                <h2 class="panel-title">Project Create</h2>
              </header>
              <div class="panel-body">
                <!-- ------------------------FORM START----------------------------- -->
                <form [formGroup]="projectForm" (ngSubmit)="onSubmit()">
                  <div class="row">
                    <div class="col">
                      <div class="form-group">
                        <label for="projectname" class="col-form-label">Project Name</label>
                        <input id="projectname" formControlName="projectName" type="text"
                               class="form-control" placeholder="project name">
                        <div class="invalid-feedback" *ngIf="projectForm.get('projectName')?.invalid && (projectForm.get('projectName')?.touched || projectForm.get('projectName')?.dirty)">
                          <ul>
                            <li *ngFor="let error of getFieldErrors('projectName')">{{ error }}</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col">
                      <div class="form-group">
                        <label for="projectcode" class="col-form-label">Project Code</label>
                        <input id="projectcode" formControlName="projectCode" type="text"
                               class="form-control" placeholder="project code">
                        <div class="invalid-feedback" *ngIf="projectForm.get('projectCode')?.invalid && (projectForm.get('projectCode')?.touched || projectForm.get('projectCode')?.dirty)">
                          <ul>
                            <li *ngFor="let error of getFieldErrors('projectCode')">{{ error }}</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col">
                      <div class="form-group">
                        <label>Assigned Manager</label>
                        <select formControlName="assignedManager" class="custom-select">
                          <option value="">Select</option>
                          <option *ngFor="let manager of managers" [ngValue]="manager">
                            {{ manager.firstName + ' ' + manager.lastName }}
                          </option>
                        </select>
                        <div class="invalid-feedback" *ngIf="projectForm.get('assignedManager')?.invalid && (projectForm.get('assignedManager')?.touched || projectForm.get('assignedManager')?.dirty)">
                          <ul>
                            <li *ngFor="let error of getFieldErrors('assignedManager')">{{ error }}</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col">
                      <div class="form-group">
                        <label for="startdate">Project Start Date</label>
                        <input id="startdate" formControlName="startDate" type="date"
                               class="form-control">
                        <div class="invalid-feedback" *ngIf="projectForm.get('startDate')?.invalid && (projectForm.get('startDate')?.touched || projectForm.get('startDate')?.dirty)">
                          <ul>
                            <li *ngFor="let error of getFieldErrors('startDate')">{{ error }}</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                    <div class="col">
                      <div class="form-group">
                        <label for="enddate">Project End Date</label>
                        <input id="enddate" formControlName="endDate" type="date"
                               class="form-control">
                        <div class="invalid-feedback" *ngIf="projectForm.get('endDate')?.invalid && (projectForm.get('endDate')?.touched || projectForm.get('endDate')?.dirty)">
                          <ul>
                            <li *ngFor="let error of getFieldErrors('endDate')">{{ error }}</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col">
                      <div class="form-group">
                        <label for="projectdetail">Project Detail</label>
                        <textarea id="projectdetail" formControlName="projectDetail"
                                  class="form-control"
                                  placeholder="project detail"></textarea>
                        <div class="invalid-feedback" *ngIf="projectForm.get('projectDetail')?.invalid && (projectForm.get('projectDetail')?.touched || projectForm.get('projectDetail')?.dirty)">
                          <ul>
                            <li *ngFor="let error of getFieldErrors('projectDetail')">{{ error }}</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col">
                      <div class="float-right">
                        <button class="btn btn-success rounded-0" type="submit" [disabled]="projectForm.invalid">Save</button>
                      </div>
                    </div>
                  </div>
                </form>
                <!-- ------------------------FORM END----------------------------- -->
              </div>
            </section>
          </div>
        </div>
      </div>

      <!-- ------------------------TABLE START----------------------------- -->
      <div class="row">
        <div class="col-lg-12 col-md-12">
          <div class="col-md-12">
            <section class="panel">
              <header class="panel-heading">
                <h2 class="panel-title">Project List</h2>
              </header>
              <div class="panel-body">
                <div class="table-responsive">
                  <table class="table table-striped">
                    <thead>
                    <tr>
                      <th scope="col">Project Code</th>
                      <th scope="col">Project Name</th>
                      <th scope="col">Start - End Date</th>
                      <th scope="col">Manager</th>
                      <th scope="col">Status</th>
                      <th scope="col">Action</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let project of projects">
                      <td>{{ project.projectCode }}</td>
                      <td>{{ project.projectName }}</td>
                      <td>{{ (project.startDate | date:'MM.dd.yyyy') + ' - ' + (project.endDate | date:'MM.dd.yyyy') }}</td>
                      <td>{{ project.assignedManager.firstName + ' ' + project.assignedManager.lastName }}</td>
                      <td>{{ project.projectStatus }}</td>
                      <td>
                        <a *ngIf="project.projectStatus.value !== 'Completed'"
                           class="btn btn-warning rounded-0"
                           [routerLink]="['/project/complete', project.projectCode]">Update
                        </a>
                        <a *ngIf="project.projectStatus.value === 'Completed'"
                           class="btn btn-warning rounded-0 disabled-button">Update
                        </a>
                        <a [routerLink]="['/project/delete', project.projectCode]">
                          <button type="button" class="btn btn-danger rounded-0">Delete</button>
                        </a>
                        <a *ngIf="project.unfinishedTaskCounts === 0 && project.projectStatus.value !== 'Completed'"
                           class="btn btn-info rounded-0"
                           [routerLink]="['/project/complete', project.projectCode]">Complete
                        </a>
                        <a *ngIf="project.unfinishedTaskCounts > 0 || project.projectStatus.value === 'Completed'"
                           class="btn btn-info rounded-0 disabled-button">Complete
                        </a>
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </section>
          </div>
        </div>
      </div>
      <!-- ------------------------TABLE END----------------------------- -->

